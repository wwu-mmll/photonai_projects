
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wwu-mmll.github.io/photonai_projects/getting-started/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../report/">
      
      
        
      
      
      <link rel="icon" href="../images/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Getting started - PHOTONAI Projects</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/pastel-theme.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PHOTONAI Projects" class="md-header__button md-logo" aria-label="PHOTONAI Projects" data-md-component="logo">
      
  <img src="../images/favicon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PHOTONAI Projects
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting started
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/wwu-mmll/photonai_projects" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    wwu-mmll/photonai_projects
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PHOTONAI Projects" class="md-nav__button md-logo" aria-label="PHOTONAI Projects" data-md-component="logo">
      
  <img src="../images/favicon.svg" alt="logo">

    </a>
    PHOTONAI Projects
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wwu-mmll/photonai_projects" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    wwu-mmll/photonai_projects
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic concepts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimal-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimal example
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-permutation-tests-on-a-slurm-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running permutation tests on a SLURM cluster
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../report/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Report
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/breast-cancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Breast cancer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="getting-started">Getting started</h1>
<h2 id="installation">Installation</h2>
<p>Install the package (and <strong>PHOTONAI</strong>) into your environment:</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>photonai<span class="w"> </span>photonai-projects<span class="w"> </span>
</code></pre></div>
<h2 id="basic-concepts">Basic concepts</h2>
<p>A <strong>PhotonaiProject</strong> manages multiple <strong>PHOTONAI</strong> analyses in a single
project folder. Each analysis has its own subfolder containing:</p>
<ul>
<li>
<p>a hyperpipe constructor script (hyperpipe_constructor.py)</p>
</li>
<li>
<p>a metadata file specifying the function name that creates the hyperpipe (hyperpipe_meta.json)</p>
</li>
<li>
<p>a data/ folder with X.npy and y.npy</p>
</li>
<li>
<p>(optionally) a permutations/ folder for results of the permutation test</p>
</li>
</ul>
<p>The typical workflow is:</p>
<ol>
<li>Create a project with PhotonaiProject. </li>
<li>Add analyses (data + hyperpipe constructor). </li>
<li>Run analyses to train and evaluate the models. </li>
<li>Run permutation tests to obtain null distributions. </li>
<li>Compare analyses statistically.</li>
</ol>
<h2 id="minimal-example">Minimal example</h2>
<p>Below is a complete example using the breast cancer dataset from
scikit-learn. We create three analyses using different feature sets,
run them, run permutation tests, and then compare them statistically.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">photonai_projects.project</span><span class="w"> </span><span class="kn">import</span> <span class="n">PhotonaiProject</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_breast_cancer</span>

<span class="c1"># Load example data</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">load_breast_cancer</span><span class="p">(</span><span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Split features into different sets</span>
<span class="n">X_1</span> <span class="o">=</span> <span class="n">X</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">X_2</span> <span class="o">=</span> <span class="n">X</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>

<span class="c1"># Create a project</span>
<span class="n">project</span> <span class="o">=</span> <span class="n">PhotonaiProject</span><span class="p">(</span><span class="n">project_folder</span><span class="o">=</span><span class="s2">&quot;example_project&quot;</span><span class="p">)</span>
</code></pre></div>
<p>You can now add multiple analyses that e.g. use different sets of features. You need to pass the data (X, y) as if
you were to call .fit() on a hyperpipe. The data arrays are then saved to disk which makes it easy to access them
when running an analysis or performing the permutation test. This also makes it easy to simply rsync everything
to an HPC cluster and run analyses there. Instead of creating a hyperpipe during runtime, you pass the location
of a Python script that contains a function (hyperpipe constructor) that creates the PHOTONAI Hyperpipe you want
to use in this project.
<div class="highlight"><pre><span></span><code><span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># 1) Register analyses</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">current_X</span> <span class="ow">in</span> <span class="p">[(</span><span class="s2">&quot;all_features&quot;</span><span class="p">,</span> <span class="n">X</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;first_feature_set&quot;</span><span class="p">,</span> <span class="n">X_1</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;second_feature_set&quot;</span><span class="p">,</span> <span class="n">X_2</span><span class="p">)]:</span>
    <span class="n">project</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">X</span><span class="o">=</span><span class="n">current_X</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
        <span class="n">hyperpipe_script</span><span class="o">=</span><span class="s2">&quot;path/to/hyperpipe_constructor.py&quot;</span><span class="p">,</span>
        <span class="n">name_hyperpipe_constructor</span><span class="o">=</span><span class="s2">&quot;create_hyperpipe&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">project</span><span class="o">.</span><span class="n">list_analyses</span><span class="p">()</span>
</code></pre></div>
Your PHOTONAI Hyperpipe constructor might look something like this.
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">photonai</span><span class="w"> </span><span class="kn">import</span> <span class="n">Hyperpipe</span><span class="p">,</span> <span class="n">PipelineElement</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">KFold</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_hyperpipe</span><span class="p">():</span>
    <span class="n">my_pipe</span> <span class="o">=</span> <span class="n">Hyperpipe</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                        <span class="n">optimizer</span><span class="o">=</span><span class="s1">&#39;grid_search&#39;</span><span class="p">,</span>
                        <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;precision&#39;</span><span class="p">,</span> <span class="s1">&#39;recall&#39;</span><span class="p">],</span>
                        <span class="n">best_config_metric</span><span class="o">=</span><span class="s1">&#39;accuracy&#39;</span><span class="p">,</span>
                        <span class="n">outer_cv</span><span class="o">=</span><span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
                        <span class="n">inner_cv</span><span class="o">=</span><span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                        <span class="n">verbosity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">project_folder</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># Add transformer elements</span>
    <span class="n">my_pipe</span> <span class="o">+=</span> <span class="n">PipelineElement</span><span class="p">(</span><span class="s2">&quot;StandardScaler&quot;</span><span class="p">,</span> <span class="n">hyperparameters</span><span class="o">=</span><span class="p">{},</span>
                               <span class="n">test_disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_mean</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_std</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">my_pipe</span> <span class="o">+=</span> <span class="n">PipelineElement</span><span class="p">(</span><span class="s2">&quot;PCA&quot;</span><span class="p">,</span> <span class="n">test_disabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Add estimator</span>
    <span class="n">my_pipe</span> <span class="o">+=</span> <span class="n">PipelineElement</span><span class="p">(</span><span class="s2">&quot;SVC&quot;</span><span class="p">,</span> <span class="n">hyperparameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;kernel&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="s1">&#39;rbf&#39;</span><span class="p">]},</span>
                               <span class="n">gamma</span><span class="o">=</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">my_pipe</span>
</code></pre></div></p>
<p>Now, when you want to run an analysis, you can refer to it by its name and simply call .run(). You can
perform a permutation test in the same way.
<div class="highlight"><pre><span></span><code><span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># 2) Run analyses</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<span class="n">project</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;all_features&quot;</span><span class="p">)</span>
<span class="n">project</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first_feature_set&quot;</span><span class="p">)</span>
<span class="n">project</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second_feature_set&quot;</span><span class="p">)</span>

<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># 3) Run permutation tests (local example)</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Use a small number of permutations for testing; increase for real studies.</span>
<span class="n">project</span><span class="o">.</span><span class="n">run_permutation_test</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;all_features&quot;</span><span class="p">,</span> <span class="n">n_perms</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">project</span><span class="o">.</span><span class="n">run_permutation_test</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;first_feature_set&quot;</span><span class="p">,</span> <span class="n">n_perms</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">project</span><span class="o">.</span><span class="n">run_permutation_test</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;second_feature_set&quot;</span><span class="p">,</span> <span class="n">n_perms</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</code></pre></div></p>
<p>If you want to compare two PHOTONAI analyses, you can use the .compare_analyses() method which either uses
the Nadeau-Bengio corrected t-test or relies on the permutations that have been computed in the individual 
significance test of each analysis.
<div class="highlight"><pre><span></span><code><span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># 4) Statistical comparison of analyses</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># For the Nadeau–Bengio test you must provide n_train and n_test as used</span>
<span class="c1"># during cross-validation. Here we give a simple example.</span>
<span class="c1"># Compare two analyses (Nadeau–Bengio corrected t-test)</span>
<span class="n">project</span><span class="o">.</span><span class="n">compare_analyses</span><span class="p">(</span>
    <span class="n">first_analysis</span><span class="o">=</span><span class="s2">&quot;first_feature_set&quot;</span><span class="p">,</span>
    <span class="n">second_analysis</span><span class="o">=</span><span class="s2">&quot;second_feature_set&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;nadeau-bengio&quot;</span><span class="p">,</span>
    <span class="n">n_train</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
    <span class="n">n_test</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Compare two analyses (permutation-based)</span>
<span class="n">project</span><span class="o">.</span><span class="n">compare_analyses</span><span class="p">(</span>
    <span class="n">first_analysis</span><span class="o">=</span><span class="s2">&quot;all_features&quot;</span><span class="p">,</span>
    <span class="n">second_analysis</span><span class="o">=</span><span class="s2">&quot;second_feature_set&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;permutation&quot;</span><span class="p">,</span>
    <span class="n">n_perms</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Compare all pairs at once (optional)</span>
<span class="n">multi_results</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">compare_multiple_analyses</span><span class="p">(</span>
    <span class="n">analyses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;all_features&quot;</span><span class="p">,</span> <span class="s2">&quot;first_feature_set&quot;</span><span class="p">,</span> <span class="s2">&quot;second_feature_set&quot;</span><span class="p">],</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;permutation&quot;</span><span class="p">,</span>
    <span class="n">n_perms</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">multi_results</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div></p>
<h2 id="running-permutation-tests-on-a-slurm-cluster">Running permutation tests on a SLURM cluster</h2>
<p>For large numbers of permutations, you can distribute them across a
SLURM array:</p>
<div class="highlight"><pre><span></span><code><span class="n">project</span><span class="o">.</span><span class="n">prepare_slurm_permutation_test</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;second_feature_set&quot;</span><span class="p">,</span>
    <span class="n">n_perms</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">conda_env</span><span class="o">=</span><span class="s2">&quot;my_photonai_env&quot;</span><span class="p">,</span>
    <span class="n">memory_per_cpu</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">n_jobs</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">run_time</span><span class="o">=</span><span class="s2">&quot;0-02:00:00&quot;</span><span class="p">,</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<p>This creates a slurm_job.cmd script in the analysis folder which you
can submit with:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>example_project/second_feature_set
sbatch<span class="w"> </span>slurm_job.cmd
</code></pre></div>
<p>Each array job will call the Typer CLI entry point run_perm_job and
execute a subset of permutation runs.</p>
<h2 id="next-steps">Next steps</h2>
<p>See the Usage page for more details on:</p>
<ul>
<li>how to design your hyperpipe constructor, </li>
<li>how metrics and scorers are handled, </li>
<li>how to interpret the comparison reports.</li>
</ul>
<p>See the API Reference for the full documentation of PhotonaiProject.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.sections", "toc.integrate"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>